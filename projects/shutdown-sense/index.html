<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><title>Jack Greenberg | Shutdown Sense Circuit</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=title content="Jack Greenberg"><meta name=description content="The portfolio and personal website for Jack Greenberg. I'm an electrical and firmware engineer studying at Olin College of Engineering."><meta itemprop=name content="Jack Greenberg"><meta itemprop=description content="The portfolio and personal website for Jack Greenberg. I'm an electrical and firmware engineer studying at Olin College of Engineering."><meta itemprop=image content="/images/portrait_hu2ba8ed41c5e8f766e39c586334c20da3_2485738_600x0_resize_box_2.png"><meta property="og:type" content="website"><meta property="og:url" content="https://www.jackgreenberg.co"><meta property="og:title" content="Jack Greenberg"><meta property="og:description" content="The portfolio and personal website for Jack Greenberg. I'm an electrical and firmware engineer studying at Olin College of Engineering."><meta property="og:image" content="/images/portrait_hu2ba8ed41c5e8f766e39c586334c20da3_2485738_600x0_resize_box_2.png"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://www.jackgreenberg.co"><meta property="twitter:title" content="Jack Greenberg"><meta property="twitter:description" content="The portfolio and personal website for Jack Greenberg. I'm an electrical and firmware engineer studying at Olin College of Engineering."><meta property="twitter:image" content="/images/portrait_hu2ba8ed41c5e8f766e39c586334c20da3_2485738_600x0_resize_box_2.png"><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=manifest href=/favicons/site.webmanifest><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Fira+Sans:wght@400;500;600;700&display=swap" rel=stylesheet><link rel=stylesheet href=/style.index.min.598cd73b6e54a0dc6076d23f7ef26a7cad4f071c0dc979638128b3f294056e66.min.598cd73b6e54a0dc6076d23f7ef26a7cad4f071c0dc979638128b3f294056e66.css integrity="sha256-WYzXO25UoNxgdtI/fvJqfK1PBxwNyXljgSiz8pQFbmY="></head><body><div class=Page><header class="Header vertical-flex__shrink"><p class=Header__title><a href=/>Jack Greenberg</a></p><label for=nav-trigger class=nav-trigger>[]</label>
<input type=checkbox id=nav-trigger><nav class=nav><label for=nav-trigger class=nav-overlay></label><p class=nav__homelink><a href=/>Jack Greenberg</a></p><ul class=nav__list><li class=nav__list__link><a href=/projects>Projects</a></li><li class=nav__list__link><a href=/about>About</a></li><li class=nav__list__link><a href=/documents/resume.pdf>Resume</a></li></ul></nav></header><div class=vertical-flex><main class="Content vertical-flex__fill PageWidth"><div class=Content__backlink><a href=/projects>&lt; Back to projects</a></div><h1>Shutdown Sense Circuit
<img class=project-image src=images/main.svg></h1><p>The shutdown sense board is a PCB<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> on the <a href=https://www.olinelectricmotorsports.com>Olin Electric Motorsports</a> Mark V car. It provides a helpful diagnostic interface for debugging the shutdown circuit and helps engineers quickly identify sources of failure for the car.</p><h2 id=the-shutdown-circuit>The Shutdown Circuit</h2><p>The shutdown circuit is the primary safety checking circuit of the car, and runs around the entire body of the vehicle. It controls the the AIRs, or <em>accumultors isolation relays</em>, which allow high voltage (~400V nominal) from the accumulator<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> to flow to the motor controller. However, in the circuit there is a series of nodes at which different conditions in the car could cause the circuit to open, preventing the car from driving. The different parts of the circuit (in order) are:</p><ol><li>ðŸ”‘ <strong>GLVMS</strong>: Grounded Low Voltage Master Switch (key to control low voltage)</li><li>ðŸ”´ <strong>ESTOP Left/Right</strong>: Emergency stop buttons on the sides of the car</li><li><a href=/projects/bspd/><strong>BSPD â†ª</strong></a></li><li>ðŸ’¥ <strong>Inertia Switch</strong>: aka <em>Crash sensor</em></li><li>ðŸ”© <strong>BOTS</strong>: Break-over-travel switch, which detects if the break isn&rsquo;t working because it is allowed to be pushed passed the hard-breaking limit</li><li>ðŸ”´ <strong>Cockpit ESTOP</strong>: Driver emergency stop button, aka the <em>oh shit</em> switch</li><li>ðŸ”Œ <strong>HVD</strong>, <strong>Connector to HVD</strong>, <strong>Main Pack Connector</strong>: Various connectors that be used to physically isolate the accumulator from the rest of the car</li><li>ðŸ”‹ <strong>IMD</strong>: Insulation monitoring device, makes sure the high voltage and low voltage systems are isolated from each other</li><li>ðŸ”‘ <strong>TSMS</strong>: Tractive System Master Switch (key to control high voltage)</li></ol><p>Here is a more detailed diagram of the shutdown circuit drafted by a previous electrical lead:</p><figure><a href=images/diagram.png><img loading=lazy sizes="(min-width: 35em) 1200px, 100vw" srcset="/projects/shutdown-sense/images/diagram_hu58d7b71ec4739b5e458b0213405108fc_444034_500x0_resize_box_2.png 500w
, /projects/shutdown-sense/images/diagram_hu58d7b71ec4739b5e458b0213405108fc_444034_800x0_resize_box_2.png 800w
, /projects/shutdown-sense/images/diagram_hu58d7b71ec4739b5e458b0213405108fc_444034_1200x0_resize_box_2.png 1200w
, /projects/shutdown-sense/images/diagram_hu58d7b71ec4739b5e458b0213405108fc_444034_1500x0_resize_box_2.png 1500w" src=/projects/shutdown-sense/images/diagram.png></a></figure><h2 id=monitoring-the-circuit>Monitoring the circuit</h2><p>The main reason for this working on this project was to provide a simple tool for visualising the status of the shutdown circuit. The majority of the nodes are monitored on boards elsewhere on the car (usually close to the node itself). The two exceptions are the <strong>GLVMS</strong> and the <strong>Left and Right ESTOPS</strong>. Monitoring for those happens on this board, as you can see towards the left side of the board<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>:</p><figure><a href=images/layout.png><img loading=lazy sizes="(min-width: 35em) 1200px, 100vw" srcset="/projects/shutdown-sense/images/layout_hue234c329ac9581df8d201c4d39b3f80e_215134_500x0_resize_box_2.png 500w
, /projects/shutdown-sense/images/layout_hue234c329ac9581df8d201c4d39b3f80e_215134_800x0_resize_box_2.png 800w" src=/projects/shutdown-sense/images/layout.png></a></figure><p>Monitoring the shutdown circuit at a node works by using a MOSFET transistor is connected to the shutdown circuit <em>just after the node it is monitoring</em>, and so if that node opens, the corresponding light will turn off, and the microcontroller on the board registers the change and sends a message to the cars CAN bus (communication network).</p><h3 id=use-case-for-the-board>Use case for the board</h3><blockquote><p>Imagine seeing the car on the racetrack and it suddenly stops. There is no explosion, but there are also no more red flashes from the <em>tractive system active light</em>, which indicates that high voltage is flowing from the battery to the motor controller. Instead of manually checking each node, you can pop open the LV Box where this board is located and quickly see where the circuit opened, get the issue fixed, and get wheels spinning again.</p></blockquote><h2 id=looking-back>Looking back</h2><p>This project was a lot of fun because of its simplicity. It is basically just a lot of LEDs in a row, and so it allowed for a lot of creativity in the &ldquo;UX&rdquo; of the board, namely for the silk screen (used for labeling on the board).</p><p>This board also taught me a lot about debugging. When we shipped the first revision of the board from the PCB manufacturer, I forgot to run the DRC, or <em>design rules check</em>, which, had it been run, would have warned me that I had some missing wires. The biggest blunder I made was forgetting to ground my microcontroller, which led to it behaving erratically. Discovering this took a lot of time combing over each part of the board with a voltmeter, and re-soldering the microcontroller <em>two</em> times. Despite the frustrations, it did teach me a lot in the end, and it was all worth it.</p><p>Since we had to evacuate campus due to the pandemic, we never were able to ship the second revision of the board, but as soon as it is safe to do it, I am excited to receive it, hook it up to the car, and watch it do its thing.</p><figure><a href=images/render.png><img loading=lazy sizes="(min-width: 35em) 1200px, 100vw" srcset="/projects/shutdown-sense/images/render_hu92d0bb014c3cbc2d2b0005a1d35fa166_173439_500x0_resize_box_2.png 500w
, /projects/shutdown-sense/images/render_hu92d0bb014c3cbc2d2b0005a1d35fa166_173439_800x0_resize_box_2.png 800w
, /projects/shutdown-sense/images/render_hu92d0bb014c3cbc2d2b0005a1d35fa166_173439_1200x0_resize_box_2.png 1200w" src=/projects/shutdown-sense/images/render.png alt="A 3D render of the board"></a><figcaption><p>A 3D render of the board</p></figcaption></figure><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Printed circuit board <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Battery ðŸ”‹ <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>Where the thick wires lead to <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></main><footer class="footer vertical-flex__shrink PageWidth"><p>Â©2020 â€¢ v2.0 â€¢ Powered by Hugo â€¢ <a href=https://github.com/jack-greenberg/jack-greenberg.github.io>0dd5584</a> â€¢ <a href=/note>Quick Note</a></p></footer></div></div></body></html>